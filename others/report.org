#+OPTIONS: ':nil *:t -:t ::t <:t H:3 \n:t arch:headline ^:nil
#+OPTIONS: author:t broken-links:nil c:nil creator:nil
#+OPTIONS: d:(not "LOGBOOK") date:nil e:nil email:nil f:t inline:t num:t
#+OPTIONS: p:nil pri:nil prop:nil stat:t tags:t tasks:t tex:t
#+OPTIONS: timestamp:nil title:t toc:nil todo:t |:t
#+TITLE: 論理回路実験レポート
#+SUBTITLE: 
#+DATE: 
#+AUTHOR: 筑波大学情報科学類2年 江畑 拓哉 (201611350)
#+LANGUAGE: ja
#+SELECT_TAGS: export
#+EXCLUDE_TAGS: noexport
#+CREATOR: Emacs 24.5.1 (Org mode 9.0.2)

#+LATEX_CLASS: koma-article
#+LATEX_CLASS_OPTIONS:
#+LATEX_HEADER:  \usepackage[top=25truemm,bottom=25truemm,left=25truemm,right=25truemm]{geometry}
#+LATEX_HEADER_EXTRA:
#+DESCRIPTION:
#+KEYWORDS:
#+SUBTITLE:
#+STARTUP: indent overview inlineimages
* 右方向シフトレジスタのネットリスト/回路図
使用したもの
- 74HC74 * 2 ( U1 ,U2 )
- データ出力端子D0 ( ICT_D.0 )
- データ入力端子 * 5   ( ICT_I.0, 1, 2, 3, 4, 5 )
- パルス出力端子 ( ICT_D.A )
- 電源/GND ( ICT_+5V ICT_GND ) 
- ジャンパ線　数十本
- 単芯　数本
** ネットリスト

#+BEGIN_SRC text
N0001: U1.1 U1.4 U1.13 U1.10
       U2.1 U2.4 U2.13 U2.10
       ICT_+5V
N0002: U1.2 ICT_D.0 ICT_I.4
N0003: U1.5 U1.12   ICT_I.3 
N0004: U1.9 U2.2    ICT_I.2
N0005: U2.5 U2.12   ICT_I.1
N0006: U2.9 ICT_I.0
N0007: U1.3 U1.11 
       U2.3 U2.11 
       ICT_D.A
#+END_SRC
** 回路図のコピー
#+ATTR_LATEX: :width 15cm
[[./logic.png]]
* Clockにデータスイッチを使っ場合の動作の観測とその考察
　Clockをつなぐ端子をパルス出力端子から、データ出力端子に変えた際の違いを観測したところ、見受けられた違いは以下のとおりであった。
- 順番ではなく一気にカウントが進んだ。
- スイッチを動かしても反応しないことがあった、
- 途中でリセットされた。
　また、これらの問題が起こった場合の共通点としてデータ出力に用いたスイッチを高速に動作させたことが挙げられる。残念ながら、ゆっくりとスイッチを操作した場合ではパルススイッチとほとんど変わらない動作をした。
** 本来起こってほしい動作
   以下に本来起こってほしい動作のタイミングチャートを示す。
   #+ATTR_LATEX: :width 15cm :placement {c}
   #+BEGIN_SRC ditaa :file flowchart1.png
              +---+   +---+   +---------+         +---+   +---+   +---+   +---+   +---+   +---+      +---+   +---+
              |   |   |   |   |         |         |   |   |   |   |   |   |   |   |   |   |   |      |   |   |   |   
   CLK(D1) ---+   +---+   +---+         +---------+   +---+   +---+   +---+   +---+   +---+   +------+   +---+   +--- =---
                                                                                                                                
              |       |       |                   |       |       |       |       |       |          |       |                                   
              v       v       v                   v       v       v       v       v       v          v       v                                                                                                                                      
            +---------------------------------+        +--------------------------------+    +---+                           
            |                                 |        |                                |    |   |                                             
    D0     -+                                 +--------+                                +----+   +------------------- =---
                                                                                                                                            
            |                                 |        |                                |    |   |                   
            v                                 v        v                                v    v   v                                         
                                                  |                       |       |                                             
                                                  v                       v       v
                                                                                                                                 
                                                  +-----------------------+       +---------------------------------- =---                                                                                   
                                                  |                       |       |                                                                                                                                                               
   LED0    ---------------------------------------+                       +-------+     
                                                                 
                              |                                   |       |                                  |                  
                              v                                   v       v                                  v                  
                                                                                                                                
                              +-----------------------------------+       +----------------------------------+                  
                              |                                   |       |                                  |                  
   LED1    -------------------+                                   +-------+                                  +------- =---
                                                                                                                          
                      |                                   |       |                                  |                          
                      v                                   v       v                                  v                          
                                                                                                                                
                      +-----------------------------------+       +----------------------------------+                          
                      |                                   |       |                                  |                          
   LED2    -----------+                                   +-------+                                  +--------------- =---
                                                                          
              |                                   |       |                               |                                     
              v                                   v       v                               v                                    
                                                                                                                                
              +-----------------------------------+       +-------------------------------+                                    
              |                                   |       |                               |                                     
   LED3    ---+                                   +-------+                               +-------------------------- =---                        
                                                                                                                                
            |                                 |        |                                |    |   |                                        
            v                                 v        v                                v    v   v                       
                                                                                                                                    
            +---------------------------------+        +--------------------------------+    +---+                           
            |                                 |        |                                |    |   |                           
   LED4    -+                                 +--------+                                +----+   +------------------- =---                  
   #+END_SRC


** 起きた問題
   起きた問題についてのタイミングチャートを順に示す。
   #+ATTR_LATEX: :width 15cm :placement {c}
   #+BEGIN_SRC ditaa :file flowchart2.png 
              +---+   +---+   +---+   +---+   +---+   +---+       +---+   +---+   +---+   +---+   +---+   +---+       +---+   +---+   +---+   +---+   +---+   +---+    
              |   |   |   |   |   |   |   |   |   |   |   |       |   |   |   |   |   |   |   |   |   |   |   |       |   |   |   |   |   |   |   |   |   |   |   |  
   CLK(D1) ---+   +---+   +---+   +---+   +---+   +---+   +--- ---+   +---+   +---+   +---+   +---+   +---+   +--- ---+   +---+   +---+   +---+   +---+   +---+   +----
                                                                                                                                                                              
                                                                                                                                                                      
                +---------------------------------------------      +---------------------------------------------      +----------------------------------------------
                |                                                   |                                                   |                                                                                                                          
     D0    -----+                                              -----+                                              -----+                                              
                                                                                                                                                                         
                                                                                                                                                                          
                              +-------------------------------                                            +-------                                                         
                              |                                                                           |                                                                 
   LED0    -------------------+                                -------------------------------------------+         ------------------------------------------------                                                                                   
                                                                                                                                                                           
                                                                                                                                                                         
                      +---------------------------------------                                    +---------------                            +-------+                 
                      |                                                                           |                                           |       |                 
   LED1    -----------+                                        -----------------------------------+                ---------------------------+       +-------------     
                                                                                                                                                                           
                                                                                                                                                                            
                      +---------------------------------------                            +-----------------------                    +---------------+                     
                      |                                                                   |                                           |               |                    
   LED2    -----------+                                        ---------------------------+                        -------------------+               +-------------   
                                                                                                                                                                            
                                                                                                                                                                         
                      +---------------------------------------            +---------------------------------------            +-----------------------+                    
                      |                                                   |                                                   |                       |                                                                                                   
   LED3    -----------+                                        -----------+                                        -----------+                       +-------------      
                                                                                                                                                                              
                                                                                                                                                                              
                +---------------------------------------------      +---------------------------------------------      +-----------------------------+                     
                |                                                   |                                                   |                             |                      
   LED4    -----+                                              -----+                                              -----+                             +-------------
   #+END_SRC
                                                                                                                            
                                                                                                                            
** 原因と考えられるもの

    原因としてまず考えられるものとして、チャタリングによる値の不確実さが挙げられる。言うまでもないがチャタリングとは入力の変化に値が不安定になってしまうことで、その時間中は入力の値は不定とされる。つまり、早い時間でスイッチを高速に動作させるとチャタリングによる不安定さも相まって信号が正しく伝わらなくなる可能性が出てくるのだ。この動作の不具合は人から見てスイッチの切り替えが明白であるデータスイッチにおいてわかりやすい違和感として感じられるだろう。
　　また、同様にD-FFの構造的な問題も考えられるだろう。
    更には、ジャンパ線の多様による回路の煩雑化もこの不安定さに一役買っていると考えられる。この実験では、単芯と長いジャンパ線を用いて配線を行うが、私の場合回路の最適化を怠っており、長いジャンパ線がICトレーナーを覆っている状態になっていた。このような無駄の多い配線は、それだけ電気信号の伝達に遅れが出ることは明白である。
　　また、使用している機材そのものの問題も考えられる。例えばブレットボードの漏電、ジャンパ線の劣化(途中の断線)が考えられる。
　　

** 対策
   
   　対策としては、チャタリング除去機能のあるICを使うようにすることや、配線を最適化すること、配線に於いてできる限りテスターを用いて確認をすること、極端に高速で動かさないことを挙げることができるだろう。
   　具体的には、NOTゲートで使用している74HC04を74HC14に変えること、できる限りのジャンパ線から単芯への移行、小さな配線のグループ単位でのテスト、そして慌てずにテストを行える余裕を持つことが考えられる。
   
